@model KPIMonitor.Models.DimPeriod
@{
    ViewData["Title"] = "Inactivate Period";
    string type = !Model.MonthNum.HasValue && !Model.QuarterNum.HasValue ? "Year"
                 : Model.QuarterNum.HasValue ? $"Quarter Q{Model.QuarterNum}"
                 : $"Month {Model.MonthNum}";
}
<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="card shadow rounded-4 border-warning">
        <div class="card-header bg-white border-bottom border-warning">
          <h4 class="mb-0 text-dark fw-bold">⚠️ Set Period Inactive</h4>
        </div>
        <div class="card-body">
          <div class="alert alert-warning rounded-4">
            Are you sure you want to set <strong>@type</strong> for <strong>@Model.Year</strong> to <strong>Inactive</strong>?
          </div>

          <dl class="row">
            <dt class="col-sm-3">Year</dt>
            <dd class="col-sm-9">@Model.Year</dd>
            <dt class="col-sm-3">Quarter</dt>
            <dd class="col-sm-9">@((Model.QuarterNum?.ToString()) ?? "—")</dd>
            <dt class="col-sm-3">Month</dt>
            <dd class="col-sm-9">@((Model.MonthNum?.ToString()) ?? "—")</dd>
            <dt class="col-sm-3">Start</dt>
            <dd class="col-sm-9">@Model.StartDate?.ToString("yyyy-MM-dd")</dd>
            <dt class="col-sm-3">End</dt>
            <dd class="col-sm-9">@Model.EndDate?.ToString("yyyy-MM-dd")</dd>
          </dl>

          <form asp-action="Inactivate" method="post">
            @Html.AntiForgeryToken()
            <input type="hidden" name="id" value="@Model.PeriodId" />
            <div class="mb-3">
              <label class="form-label fw-semibold">Last Changed By</label>
              <input name="lastChangedBy" class="form-control" maxlength="150" required />
              <span class="text-danger" asp-validation-for="LastChangedBy"></span>
            </div>

            <div class="d-flex gap-2">
              <button type="submit" class="btn btn-warning btn-lg">Confirm Inactive</button>
              <a class="btn btn-outline-secondary btn-lg" href="@Url.Action("Index", new { year = Model.Year })">Cancel</a>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

@section Scripts{
  @{ await Html.RenderPartialAsync("_ValidationScriptsPartial"); }
}